import{a as T}from"./chunk-SNQC5Y52.js";import{$a as m,Da as c,Ea as s,Ec as U,Ja as O,Jc as F,M as E,Ma as v,N as y,Na as p,Sc as I,Ub as P,ab as f,ca as d,ga as u,ka as w,na as M,sc as S,ua as _,va as x,wa as b,xa as h,ya as C}from"./chunk-5Q5JURXL.js";var g={formId:"budgetunit",title:"Category",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"Fill category name..."},{name:"Label",value:"Title"}]}]};function D(n,o){if(n&1){let r=O();c(0,"button",11),v("click",function(e){E(r);let i=p().$implicit,a=p(2).$implicit;return p().handleButtonClick(i,a),y(e.stopPropagation())}),c(1,"span",4),m(2),s()()}if(n&2){let r=p().$implicit;d(2),f(r==null?null:r.icon)}}function j(n,o){if(n&1&&_(0,D,3,1,"button",10),n&2){let r=o.$implicit;x(r!=null&&r.icon?0:-1)}}function $(n,o){if(n&1&&(c(0,"div",9),h(1,j,1,1,null,null,b),s()),n&2){let r=p(2);d(),C(r.config.buttons.slice(1))}}function z(n,o){if(n&1&&(c(0,"div",6)(1,"h3",7),m(2),s(),c(3,"p",8),m(4),s(),_(5,$,3,0,"div",9),s()),n&2){let r=o.$implicit,t=p();d(2),f(r.name),d(2),f(r.cost),d(),x(t.config.buttons.length?5:-1)}}var k=(()=>{let o=class o extends S{allowUrl(){return!1}constructor(t,e,i,a){super(g,i,e,t,"Budgetunit"),this._budgetunitService=t,this._translate=e,this._form=i,this._router=a,this.configType="local",this.columns=["name","cost"],this.config=this.getConfig(),this.budget=this._router.url.replace("/units/",""),this.config.buttons.unshift({icon:"add",click:()=>this.createUnit()}),this.config.buttons.push({icon:"edit",click:l=>this.editUnit(l)}),this.config.buttons.push({icon:"delete",click:l=>this.deleteUnit(l)}),this._budgetunitService.get({query:"budget="+this.budget}).subscribe({next:()=>this.setDocuments()})}handleButtonClick(t,e){t.click&&e!==void 0?t.click(e):t.click&&t.click()}createUnit(){let t=JSON.parse(JSON.stringify(g));this.formService.modal(t,[{label:"Create",click:(e,i)=>{let a=e;a.budget=this.budget,this.service.create(a).subscribe({next:()=>{this.setDocuments(),i()},error:l=>console.error("Error creating unit:",l)})}}])}editUnit(t){let e=JSON.parse(JSON.stringify(g));this.formService.modal(e,[{label:"Update",click:(i,a)=>{let l=i;this.service.update(l).subscribe({next:()=>{this.setDocuments(),a()},error:B=>console.error("Error updating unit:",B)})}}],t)}deleteUnit(t){t._id&&confirm(`Delete unit "${t.name}"?`)&&this.service.delete(t).subscribe(()=>{this.documents=this.documents.filter(e=>e._id!==t._id)})}};o.\u0275fac=function(e){return new(e||o)(u(T),u(U),u(F),u(P))},o.\u0275cmp=w({type:o,selectors:[["ng-component"]],features:[M],decls:10,vars:1,consts:[["id","wrapper",1,"wrapper"],[1,"units-header"],[1,"name-page"],[1,"create-btn",3,"click"],[1,"material-icons"],[1,"units-cards"],[1,"unit-card","clickable-card"],[1,"unit-name"],[1,"unit-cost"],[1,"unit-actions"],[1,"action-btn"],[1,"action-btn",3,"click"]],template:function(e,i){e&1&&(c(0,"div",0)(1,"div",1)(2,"p",2),m(3,"My categories"),s(),c(4,"button",3),v("click",function(){return i.handleButtonClick(i.config.buttons[0])}),c(5,"span",4),m(6),s()()(),c(7,"div",5),h(8,z,6,3,"div",6,b),s()()),e&2&&(d(6),f(i.config.buttons[0]==null?null:i.config.buttons[0].icon),d(2),C(i.documents))},dependencies:[I],styles:[".units-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-right:15px}.units-header[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]{background-color:#1e8de2;color:#fff;border:none;border-radius:6px;padding:8px 16px;font-size:16px;cursor:pointer;display:flex;align-items:center;gap:5px}.units-header[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]   span.material-icons[_ngcontent-%COMP%]{color:#fff;background:none;box-shadow:none}.units-header[_ngcontent-%COMP%]   .name-page[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-left:20px;color:#efe8e8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:400px;display:block}.action-btn[_ngcontent-%COMP%]{background:transparent!important;color:#fff;border:none;padding:6px 10px;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center}.action-btn[_ngcontent-%COMP%]   span.material-icons[_ngcontent-%COMP%]{color:#fff;background:none!important;box-shadow:none!important}.units-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-top:20px;padding-bottom:120px}.unit-card[_ngcontent-%COMP%]{background:#373535;border-radius:8px;padding:15px 20px;box-shadow:0 2px 5px #14131380;transition:transform .2s ease-in-out;cursor:pointer;position:relative}.unit-card[_ngcontent-%COMP%]   .unit-name[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin:0 0 5px;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:400px;display:block}.unit-card[_ngcontent-%COMP%]   .unit-cost[_ngcontent-%COMP%]{font-size:16px;color:#fff;margin:0 0 35px}.unit-card[_ngcontent-%COMP%]   .unit-actions[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;display:flex;gap:4px}"]});let n=o;return n})();var W=[{path:"",component:k},{path:":id",component:k}];export{W as unitsRoutes};
